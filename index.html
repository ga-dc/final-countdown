<!DOCTYPE html>
<html>
  <head>
    <title>W07D05 Quiznos</title>
    <link href='http://fonts.googleapis.com/css?family=VT323' rel='stylesheet' type='text/css'>
    <style>
      *
      {
        margin:0;
        padding:0;
        border:0;
        font-size:0;
        box-sizing:border-box;
        font-family: "VT323", monospace;
      }
      body,html,form
      {
        position:relative;
        width:100%;
        height:100%;
        background-color:black;
      }
      form
      {
        display:block;
      }
      #counter
      {
        display:block;
        width:320px;
        position:relative;
        top:30%;
        margin:0 auto;
        border-radius:10px;
        font-size:144px;
        line-height:144px;
        text-align:right;
        padding:0px 24px;
        background-color:transparent;
        color:#0f0;
        box-shadow:0px 0px 100px 0px #060;
        cursor:pointer;
      }
      #counter:focus
      {
        outline:0;
      }
      #counter:hover
      {
        color:#8f8;
      }
      #counter.fail
      {
        color:red;
      }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
      $(document).ready( function(){

        // INITIALIZE
        var isItRunning = 0;
        var timeToCount;
        counter = $("#counter");

        // CLICK HANDLER
        counter.on( "click", function( event ){
          event.preventDefault();

          // START OR RESET COUNTER
          if ( isItRunning === 0 || isItRunning === 2 ) {

            // If counter ran out, reset counter
            if ( isItRunning === 2 ) {
              resetCounter();
            }

            isItRunning = 1;

            // Start counter
            timeToCount = setInterval( function() {

              // Reduce counter value by 1
              var value = counter.attr( "value" );
              counter.attr( "value", value - 1 );

              // When counter runs out, change color to red and stop counter
              if ( value <= "1" ) {
                counter.css( "color", "red" );
                clearInterval( timeToCount );
                isItRunning = 2;                  // state for finished counter
              }
            }, 1000);
          }

          // PAUSE COUNTER
          else if ( isItRunning === 1 ) {
            isItRunning = 0;
            clearInterval( timeToCount );
          }

        })
      });

      function resetCounter() {
        counter.attr( "value", 200 );
        counter.css( "color", "#0f0" );
      }

    </script>

  </head>
  <body>

    <form>
      <input type="submit" id="counter" value="200" />
    </form>

  </body>
</html>
